---
title: "Координатные системы отсчета"
subtitle: "Геоинформатика I. Базы пространственных данных"
date: today
date-format: long
author: "Самсонов Тимофей Евгеньевич"
execute:
  echo: false
  freeze: true
engine: knitr
format:
  revealjs: 
    theme: [default, custom.scss]
    margin: 0.2
    width: 1280
    height: 720
    slide-number: true
    footer: "Самсонов Т. Е. Геоинформатика: курс лекций"
    header-includes: <link rel="stylesheet" media="screen" href="https://fontlibrary.org//face/pt-sans" type="text/css"/>
bibliography: references.yaml
mainfont: PT Sans
---

## Координатная система отсчета

```{mermaid}
%%| fig-width: 12
flowchart LR
  A(Система отсчета) --> B(Пространственная)
  A --> C(Временная)
  B --> D(Географические идентификаторы)
  B --> E(Координатная)
  B --> F(Параметрическая координатная)
  C --> G(Координатная)
  C --> H(Порядковая)
  C --> I(Календари)
  E --> J(Координатная)
  F --> J
  G --> J
```

## Определение SRS на языке WKT

**WKT** представляет одну систему координат или объект координатной операции.

-   Каждый объект представляется в виде токена, состоящего из ключевого слова, за которым следует множесто атрибутов объекта.

-   Некоторые объекты состоят из других объектов, поэтому результат может состоять из нескольких уровней вложенности (глубина не ограничена).

Пример для трёх уровней:

``` code
KEYWORD1[
  attribute1, 
  KEYWORD2[
    attribute2, 
    attribute3,
    KEYWORD3[
      attribute4
    ]
  ]
]
```

## Общие атрибуты

Вне зависимости от типа описываемого объекта ему всегда могут быть заданы:

1.  Имя (*name*).

2.  Использование (*usage*)

    -   Область применения (*scope*).

    -   Пространственный охват (*extent*).

3.  Идентификатор (*identifier*).

4.  Ремарка (*remark*).

::: callout-note
## Имя

Имя является обязательным атрибутом при описании *координатной системы отсчета*, а также для некоторых компонент структуры ее описания
:::

## Использование

`<usage>` включает в себя обязательную пару области применения и охвата:

`USAGE[<scope>, <extent>]`

`<scope>` представляет текстовое описание области применения:

`SCOPE["Engineering survey, topographic mapping."]`

`<extent>` хранит описание пространственного охвата:

-   `AREA["Between 36°E and 42°E, northern hemisphere]`

-   `BBOX[0, 36, 84, 42]` --- $[\phi_0, \lambda_0, \phi_1, \lambda_1]$

-   `VERTICALEXTENT[-1000,0]`

-   `VERTICALEXTENT[-200, 6000, LENGTHUNIT["metre",1.0]]`

-   `TIMEEXTENT[2013-01-01,2013-12-31]` --- $[T_0, T_1]$

-   `TIMEEXTENT["Carbon", "Pleistocene"]`

Токенов `<usage>` может быть несколько --- для каждой области применения.

## Примеры

**UTM 37N**

``` code
USAGE[
  SCOPE["Engineering survey, topographic mapping."],
  AREA["Between 36°E and 42°E, northern hemisphere between equator 
        and 84°N, onshore and offshore. Djibouti. Egypt. Eritrea. 
        Ethiopia. Georgia. Iraq. Jordan. Kenya. Lebanon. Russian 
        Federation. Saudi Arabia. Somalia. Sudan. Syria. Turkey. 
        Ukraine."],
  BBOX[0,36,84,42]]
```

**Местная система координат**

``` code
USAGE[
  SCOPE["Small scale topographic mapping."], 
  AREA["Finland - onshore and offshore."]],
USAGE[
  SCOPE["Cadastre."],
  AREA["Finland - onshore between 26°30'E and 27°30'E."], 
  BBOX[60.36,26.5,70.05,27.5]]
```

## Идентификатор

**Идентификатор** --- опциональный (необязательный) атрибут, который представляет ссылку на внешнее описание объекта (координатной системы, операции и т.д.).

+-------------------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `<wkt separator>` | `::=`  | `<comma>`                                                                                                                                                                                                                    |
+-------------------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `<identifier>`    | `::=`  | `<identifier keyword> <left delimiter> <authority name> <wkt separator> <authority unique identifier> [ <wkt separator> <version> ] [ <wkt separator> <authority citation> ] [ <wkt separator> <id uri> ] <right delimiter>` |
+-------------------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

``` code
ID["Росреестр", "СК-ХХХ", 666]
ID["EPSG",20907]  — GSK-2011 / Gauss-Kruger zone 23
ID["EPSG",4326,URI["urn:ogc:def:crs:EPSG::4326"]]
ID["ESRI",102604] — NAD_1983_Georgia_Statewide_Lambert
```

## Ремарка (примечание)

**Ремарка** является опциональным параметром и носит информационный характер, т.е. не влияет на поведение объекта, к которому она относится.

-   Ремарки нельзя использовать на уровне компонент координатной системы.

-   Ремарка --- единственное место в WKT, где можно использовать символы, не входящие в латинский алфавит.

``` code
GEOGCRS["S-95",
  DATUM["Pulkovo 1995", 
    ELLIPSOID["Krassowsky 1940",6378245,298.3, LENGTHUNIT["metre",1.0]] ], 
  CS[ellipsoidal,2], 
    AXIS["latitude",north,ORDER[1]], 
    AXIS["longitude",east,ORDER[2]], 
    ANGLEUNIT["degree",0.0174532925199433], 
  REMARK["Система Геодеэических Координат года 1995(СК-95)"]
]
```

## Единицы измерения

**Единицы измерения** указываются для некоторых параметров осей координат, а также параметров координатных операций.

+------------------+------------+-------------------------------------------------------------------+
| `<spatial unit>` | `::=`      | `<angle unit> | <length unit> | <parametric unit> | <scale unit>` |
+------------------+------------+-------------------------------------------------------------------+
| `<unit>`         | `::=`      | `<spatial unit> | <time unit>`                                    |
+------------------+------------+-------------------------------------------------------------------+

После единицы измерения указывается *коэффициент пересчета:*

``` code
LENGTHUNIT["metre",1] 
LENGTHUNIT["German legal metre",1.0000135965] 
ANGLEUNIT["degree",0.0174532925199433] 
SCALEUNIT["parts per million",1E-06] 
PARAMETRICUNIT["hectopascal",100]
```

::: callout-important
## Эталоны

Коэффициенты пересчета указываются ***к*** эталонным единицам СИ: метрам, радианам и т.д.
:::

## Система координат

Определяется рядом параметров:

+-----------------------+-------+--------------------------------------------------------------------+
| `<coordinate system>` | `::=` | `<spatial cs> | <temporalCountMeasure cs> | <ordinal-dateTime cs>` |
+-----------------------+-------+--------------------------------------------------------------------+
| `<spatial cs>`        | `::=` | `<cs keyword> <left delimiter> <spatial cs type>`                  |
|                       |       |                                                                    |
|                       |       | `<wkt separator> <dimension>`                                      |
|                       |       |                                                                    |
|                       |       | `[{<wkt separator> <identifier>}]*`                                |
|                       |       |                                                                    |
|                       |       | `<right delimiter>`                                                |
|                       |       |                                                                    |
|                       |       | `{<wkt separator> <spatial axis>}*`                                |
|                       |       |                                                                    |
|                       |       | `[<wkt separator> <cs unit>]`                                      |
+-----------------------+-------+--------------------------------------------------------------------+

## Система координат

Определяется рядом параметров:

+---------------------+-------+-------------------------------------------------------------------------------------------------------+
| `<dimension>`       | `::=` | `1|2|3`                                                                                               |
+---------------------+-------+-------------------------------------------------------------------------------------------------------+
| `<spatial cs type>` | `::=` | `affine | Cartesian | cylindrical | ellipsoidal | linear | parametric | polar | spherical | vertical` |
+---------------------+-------+-------------------------------------------------------------------------------------------------------+
| `<spatial axis>`    | `::=` | `<axis keyword> <left delimiter> <axis nameAbbrev>`                                                   |
|                     |       |                                                                                                       |
|                     |       | `<wkt separator> <axis direction>`                                                                    |
|                     |       |                                                                                                       |
|                     |       | `[<wkt separator> <axis order>]`                                                                      |
|                     |       |                                                                                                       |
|                     |       | `[<wkt separator> <spatial unit>]`                                                                    |
|                     |       |                                                                                                       |
|                     |       | `[<wkt separator> <axis range>]`                                                                      |
|                     |       |                                                                                                       |
|                     |       | `[{ <wkt separator> <identifier> }]*`                                                                 |
|                     |       |                                                                                                       |
|                     |       | `<right delimiter>`                                                                                   |
+---------------------+-------+-------------------------------------------------------------------------------------------------------+

## Библиография
